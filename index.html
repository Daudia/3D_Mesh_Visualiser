<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>3D Surface Mesher</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Quicksand:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
  </head>
  <body>
    <div id="logo-signature"></div>

    <div id="ui">
      <div id="title">
        <h1>3D Surface Mesher</h1>
      </div>

      <div class="section">
        <label for="functionInput">Function z = f(x, y)</label>
        <div class="function-row">
          <input
            type="text"
            id="functionInput"
            value="(x * Math.sin(y) + y * Math.cos(x)) / 2"
          />
          <button id="updateBtn">Update</button>
        </div>

        <div class="inline-row">
          <label for="presetSelect">Sample functions :</label>
          <select id="presetSelect">
            <option value="">-- Pick a function --</option>
            <option value="1 / ((x * x + 1)) + 1 / ((y * y + 1))">
              Crête double
            </option>
            <option value="Math.sin(x * 2) * Math.cos(y * 2)">
              Onde sinusoïdale
            </option>
            <option value="Math.sin(Math.sqrt(x * x + y * y) * 5)">
              Onde radiale
            </option>
            <option value="Math.sin(x) + Math.sin(y)">Vagues croisées</option>
            <option value="Math.sin(x * x - y * y)">Onde carrée radiale</option>
            <option
              value="Math.sin(10 * Math.atan2(y, x)) * Math.exp(-x * x - y * y)"
            >
              Explosion spirale
            </option>
            <option value="Math.sin(10 * x) * Math.sin(10 * y)">
              Pics en grille
            </option>
            <option value="Math.sin(x*y) * Math.cos(x + y)">
              Montagnes fractales
            </option>
            <option value="Math.atan2(y, x) * Math.sqrt(x*x + y*y)">
              Tourbillon polaire
            </option>
            <option value="Math.abs(Math.sin(3 * x) + Math.sin(3 * y))">
              Crêtes dentelées
            </option>
            <option value="Math.cos(x + y)">Valons diagonaux</option>
            <option value="-Math.abs(Math.sin(x) * Math.cos(y))">
              Fosse sinusoïdale
            </option>
            <option value="Math.sin(x * y) * Math.sin(y)">
              Champ d’interférence
            </option>
            <option value="Math.sign(Math.sin(x)) + Math.sign(Math.cos(y))">
              Onde carrée
            </option>
            <option value="-Math.sqrt(x*x + y*y)">Cône inversé</option>

            <option value="Math.cos(Math.sqrt(Math.abs(x * y)))">
              Réseau radial
            </option>
            <option
              value="Math.atan2(y, x) + Math.sin(3 * Math.sqrt(x*x + y*y))"
            >
              Tourbillon perturbé
            </option>
            <option value="(x * Math.sin(y) + y * Math.cos(x)) / 2">
              Dynamique tordue
            </option>
            <option
              value="3*Math.exp(-Math.abs(x*y)) * Math.sin(4*x) * Math.cos(4*y)"
            >
              Fleur vibrante
            </option>
            <option value="Math.pow(Math.sin(x*x + y*y), 3)">
              Champs cubique
            </option>
            <option value="Math.abs(Math.sin(x * y)) * Math.sign(x - y)">
              Zébrures diagonales
            </option>
            <option value="Math.sin(10 * (x*x - y*y)) / (10 + x*x + y*y)">
              Lentilles interférentes
            </option>

            <option
              value="Math.sign(x*y) * Math.sin(Math.sqrt(Math.abs(x - y)))"
            >
              Onde coupée
            </option>
            <option value="Math.atan2(Math.sin(y), Math.cos(x))">
              Torsion circulaire
            </option>
            <option
              value="Math.sin(Math.sqrt(x*x + y*y)) * Math.cos(Math.atan2(y, x))"
            >
              Sillage radial
            </option>
            <option
              value="Math.exp(-Math.pow(x*x + y*y, 0.3)) * Math.sin(6 * Math.sqrt(x*x + y*y))"
            >
              Cymatique douce
            </option>
            <option value="(Math.atan2(x, y) * Math.sin(x*x + y*y)) / 2">
              Tourbillon fractal
            </option>
            <option value="Math.sin(x + y + Math.sin(x*y))">
              Motif imbriqué
            </option>
            <option value="Math.sin(x) * Math.sin(y) + Math.cos(x + y)">
              Onde yin-yang
            </option>
            <option value="Math.sin(Math.atan2(y, x) + Math.sqrt(x*x + y*y))">
              Balance ondulée
            </option>
            <option value="Math.sin(x*x - y*y) * Math.cos(2 * x * y)">
              Symétrie inversée
            </option>
            <option
              value="Math.sin(Math.atan2(y, x) * 3) * Math.cos(Math.sqrt(x*x + y*y))"
            >
              Entrelac celtique
            </option>
            <option
              value="Math.sin(4 * Math.atan2(y, x)) * Math.sqrt(x*x + y*y)"
            >
              Spirale ondulée
            </option>
            <option
              value="Math.sin(2 * Math.atan2(y, x)) + Math.cos(3 * Math.sqrt(x*x + y*y))"
            >
              Spirale croisée
            </option>
            <option value="Math.atan2(y, x) + Math.sin(x*x + y*y)">
              Tourbillon perturbé
            </option>
            <option
              value="Math.sin(5 * Math.atan2(y, x)) * Math.sin(2 * Math.sqrt(x*x + y*y))"
            >
              Spirale tressée
            </option>
            <option
              value="Math.floor(5 * Math.atan2(y, x)) + Math.sqrt(x*x + y*y)"
            >
              Escalier en colimaçon
            </option>
            <option
              value="Math.sin(Math.atan2(y, x) + 4 * Math.log(1 + x*x + y*y))"
            >
              Colimaçon logarithmique
            </option>
          </select>
        </div>
      </div>

      <div class="section">
        <h3>Camera controls</h3>
        <label>Distance</label>
        <input
          type="range"
          id="zoomControl"
          min="5"
          max="80"
          value="20"
        /><br />

        <label>X Angle</label>
        <input type="range" id="camX" min="-180" max="180" value="0" /><br />

        <label>Y angle</label>
        <input type="range" id="camY" min="-90" max="90" value="30" />
      </div>

      <div class="section">
        <h3>Animation</h3>
        <label for="rangeSlider">Domain Range [-R, R]</label>
        <input
          type="range"
          id="rangeSlider"
          min="1"
          max="30"
          step="1"
          value="10"
        />
        <label>Rotation Speed</label>
        <input
          type="range"
          id="rotationSpeed"
          min="-0.1"
          max="0.1"
          step="0.001"
          value="0.01"
        /><br />
      </div>

      <div class="section">
        <h3>Texture</h3>
        <div class="texture-group">
          <button class="textureBtn" data-texture="1">Gradient Mesh</button>
          <button class="textureBtn" data-texture="2">Super-Mesh</button>
          <button class="textureBtn" data-texture="3">Glitch</button>
          <button class="textureBtn" data-texture="4">Rainbow</button>
        </div>

        <div class="inline-row">
          <label for="colorPicker">Color Selector :</label>
          <input type="color" id="colorPicker" value="#e27df2" />
        </div>

        <label>
          <input type="checkbox" id="colorVariationToggle" checked />
          Gradient Color Variation
        </label>
      </div>
      <div class="section">
        <label>Mesh Segments</label>
        <input
          type="range"
          id="wireSegments"
          min="5"
          max="100"
          value="30"
          step="1"
        />
      </div>

      <button id="toggleMenuBtn">Hide Menu</button>
    </div>

    <div id="showMenuBtn">Show Menu</div>

    <div id="canvasContainer"></div>

    <script src="main.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    <script>
      fetch("logo_line.svg")
        .then((res) => res.text())
        .then((svgText) => {
          const parser = new DOMParser();
          const svgDoc = parser.parseFromString(svgText, "image/svg+xml");
          const svgEl = svgDoc.querySelector("svg");

          // Pour que le stroke suive la couleur choisie
          svgEl.setAttribute("stroke", "currentColor");
          svgEl.setAttribute("fill", "none"); // optionnel
          svgEl.setAttribute("id", "logo-svg");

          document.getElementById("logo-signature").appendChild(svgEl);

          updateLogoColor(); // initialise couleur
        });

      function updateLogoColor() {
        const color = document.getElementById("colorPicker").value;
        document.getElementById("logo-svg").style.color = color;
      }

      document
        .getElementById("colorPicker")
        .addEventListener("input", updateLogoColor);
    </script>
  </body>
</html>
